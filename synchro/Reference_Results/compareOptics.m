% {}~

% template analysis script
% - include Matlab library
pathToLibrary="..\..\..\MatLabTools";
addpath(genpath(pathToLibrary));

opticsFileNames=[...
    "..\original_start_at_crystal\extraction_carbon_270mm_optics.tfs" ...
    "..\bumped\extraction_carbon_270mm_optics.tfs" ...
    "..\bumped_with_crystal\extraction_carbon_270mm_optics.tfs" ...
%     "..\extraction_carbon_270mm_optics.tfs" ...
%     "..\original\extraction_carbon_270mm_optics.tfs" ...
    ];
labels=[...
    "original" ...
    "bump at crystal" ...
    "bump at crystal + channelled beam" ...
    ];
geometryFileName="..\original_start_at_crystal\extraction_carbon_270mm_geometry.tfs";

optics = ParseTfsTable(opticsFileNames,'optics');
[Qx,Qy,Chrx,Chry,Laccel,headerNames,headerValues] = ...
    ParseTfsTableHeader(opticsFileNames);
% read geometry file
geometry = ParseTfsTable(geometryFileName,'geometry');

title="TM, Carbon ions, 270 mm, extraction";
CompareOptics(optics,labels,geometry,"BET",title);
CompareOptics(optics,labels,geometry,"D",title);
CompareOptics(optics,labels,geometry,"CO",title);
% CompareOptics(optics,labels,geometry,"ENV",title);


